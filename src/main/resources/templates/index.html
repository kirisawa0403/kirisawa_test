<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.19/index.global.min.js'></script>
<title>Insert title here</title>
<link th:href="@{/css/main.css}" rel="stylesheet">
</head>
<body>  
    <form class="inputform" th:action="@{/input}" th:method="post" th:object="${inputTest}">
          <p>入力フォーム</p>

          <p>予定名：<input type="text" th:field="*{title}"></p>
          <p>日付：<input type="date" th:field="*{date}"></p>
          <p>名前：<input type="text" th:field="*{name}"></p>
          <p>詳細：<input type="text" th:field="*{detail}"></p>

          <p><input type="submit" value="登録"></p>
      </form>
    <div class="maincont">
        <div id='calendar'></div>
    </div>

    <script th:inline="javascript">

        /*
      document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'dayGridMonth'
        });
        calendar.render();
      });
      */
      
      /*<![CDATA[*/
      document.addEventListener('DOMContentLoaded', function() {
          var events = /*[[${events}]]*/{};
          var calendarEl = document.getElementById('calendar');
          var calendar = new FullCalendar.Calendar(calendarEl, {
              initialView: 'dayGridMonth',
              events: events.map(e => ({
                  title: e.title,
                  start: e.date
              }))
          });
          calendar.render();
          /*]]>*/
          });

    </script>
</body>
</html>